(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{20:function(e,t,n){},26:function(e,t,n){e.exports=n(41)},31:function(e,t,n){},35:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),o=n(23),i=n(10),l=(n(31),n(9)),s=n.n(l),u=n(12),m=n(4),p=n(5),d=n(13),h=n(6),v=n(7),E=(n(20),n(16)),f=n.n(E),g=function(){function e(){Object(m.a)(this,e),this.getProfile=this.getProfile.bind(this)}return Object(p.a)(e,[{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return f()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"setToken",value:function(e){localStorage.setItem("id_token",e)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"logout",value:function(){localStorage.removeItem("id_token")}},{key:"getProfile",value:function(){return f()(this.getToken())}}]),e}(),b=new g;function y(e){var t=new g;return function(n){Object(v.a)(c,n);var a=Object(h.a)(c);function c(){var e;return Object(m.a)(this,c),(e=a.call(this)).state={user:null},e}return Object(p.a)(c,[{key:"componentWillMount",value:function(){if(t.loggedIn())try{var e=t.getProfile();this.setState({user:e})}catch(n){t.logout(),this.props.history.replace("/login")}else this.props.history.replace("/login")}},{key:"render",value:function(){return this.state.user?r.a.createElement(e,Object.assign({},this.props,{user:this.state.user})):null}}]),c}(a.Component)}var k=function(e){Object(v.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).state={password:"",email:""},e.submit=e.submit.bind(Object(d.a)(e)),e}return Object(p.a)(n,[{key:"componentWillMount",value:function(){b.loggedIn()&&this.props.history.replace("/")}},{key:"submit",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.password,a=t.email,""!==n&&""!==a){e.next=4;break}return alert("il faut tout mettre un truc"),e.abrupt("return");case 4:return e.next=6,fetch("https://etud-event-api.herokuapp.com/account/connect",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:a,password:n})});case 6:return r=e.sent,e.next=9,r.json();case 9:"OK"!==(c=e.sent).result?alert("il y a une erreur"):(b.setToken(c.token),this.props.history.replace("/"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container login"},r.a.createElement("div",{className:"form"},r.a.createElement("h1",{className:"text2"},"S'authentifier"),r.a.createElement("label",{htmlFor:"email",className:"text"},"E-MAIL"),r.a.createElement("input",{type:"text",id:"email",onChange:function(t){return e.setState({email:t.target.value.trim().toLowerCase()})}}),r.a.createElement("label",{htmlFor:"password",className:"text"},"MOT DE PASSE"),r.a.createElement("input",{type:"password",id:"password",onChange:function(t){return e.setState({password:t.target.value})}}),r.a.createElement("div",{className:"passwordforget"},r.a.createElement("p",null,"Mot de passe oubli\xe9 ?")),r.a.createElement("div",{className:"boutonContainer"},r.a.createElement("button",{className:"connexion",onClick:this.submit},"Connexion")),r.a.createElement("div",{className:"signup",onClick:function(){return e.props.history.replace("/register")}},r.a.createElement("p",null,"Inscription"))))}}]),n}(a.Component),j=function(e){Object(v.a)(n,e);var t=Object(h.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container register"},r.a.createElement("div",{className:"form"},r.a.createElement("h1",{className:"text2"},"S'inscrire"),r.a.createElement("label",{htmlFor:"email",className:"text"},"E-MAIL"),r.a.createElement("input",{type:"text",name:"email",id:"email"}),r.a.createElement("label",{htmlFor:"password",className:"text"},"MOT DE PASSE"),r.a.createElement("input",{type:"password",name:"password",id:"password"}),r.a.createElement("label",{htmlFor:"cpassword",className:"text"},"CONFIRMER LE MOT DE PASSE"),r.a.createElement("input",{type:"password",name:"password",id:"cpassword"}),r.a.createElement("label",{htmlFor:"select",className:"text"},"D\xc9PARTEMENT"),r.a.createElement("select",{id:"select",name:"dep"},r.a.createElement("option",{value:"R&T"},"R\xe9seaux et t\xe9l\xe9communications"),r.a.createElement("option",{value:"GB"},"G\xe9nie biologique"),r.a.createElement("option",{value:"GCGP"},"G\xe9nie chimique - G\xe9nie des proc\xe9d\xe9s"),r.a.createElement("option",{value:"GCCD"},"G\xe9nie civil - Construction durable"),r.a.createElement("option",{value:"GEII"},"G\xe9nie \xe9lectrique et inhtmlFormatique industrielle"),r.a.createElement("option",{value:"GMP"},"G\xe9nie m\xe9canique et productique"),r.a.createElement("option",{value:"QLIO"},"Qualit\xe9, logistique industrielle et organisation")),r.a.createElement("div",{className:"passwordforget"},r.a.createElement("p",null,"Mot de passe oubli\xe9 ?")),r.a.createElement("div",{className:"boutonContainer"},r.a.createElement("button",{className:"connexion"},"Connexion")),r.a.createElement("div",{className:"signup",onClick:function(){return e.props.history.replace("/login")}},r.a.createElement("p",null,"Connexion"))))}}]),n}(a.Component);n(35);function O(e){var t=new Date(e.data.date);return console.log(e),r.a.createElement("div",{onClick:function(){return e.history.push("/annonce/"+e.data.uid)},className:"annonce",style:{backgroundImage:"url(http://etudevent-api.herokuapp.com/cdn/annonce/".concat(e.data.image||"3.jpg",")")}},r.a.createElement("h1",null,e.data.title),r.a.createElement("p",null,["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"][t.getDay()-1]," ",t.getDate()," ",["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"][t.getMonth()]," ",t.getFullYear()))}var N=y(function(e){Object(v.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).logout=e.logout.bind(Object(d.a)(e)),e.state={annonces:[]},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.getAnnonce()}},{key:"logout",value:function(){b.logout(),this.props.history.replace("/login")}},{key:"getAnnonce",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,a,r,c=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:10,n=c.length>1&&void 0!==c[1]?c[1]:0,e.next=4,fetch("https://etud-event-api.herokuapp.com/annonce?show=".concat(t,"&page=").concat(n),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,console.log(r),this.setState({annonces:this.state.annonces.concat(r.annonce)});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nohover"},r.a.createElement("div",{className:"image"})),r.a.createElement("div",{className:"active"},"Annonces"),r.a.createElement("div",null,"Forum"),r.a.createElement("div",null,"Liens utiles"),r.a.createElement("div",null,"Contact"),r.a.createElement("div",{className:"right nohover"},r.a.createElement("div",{className:"post",onClick:this.logout},"Poster une annonce"),r.a.createElement("div",null,r.a.createElement("div",{className:"image"})))),r.a.createElement("nav",null,r.a.createElement("div",{className:"active"},"Annonces officielles"),r.a.createElement("div",null,"Annonces \xe9tudiantes"),r.a.createElement("div",null,"Favoris")),r.a.createElement("div",{className:"acontainer"},r.a.createElement("div",{className:"main"},this.state.annonces.map((function(t,n){return r.a.createElement(O,{key:n,data:t,history:e.props.history})}))),r.a.createElement("div",{className:"selector"})))}}]),n}(a.Component)),x=y(function(e){Object(v.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this)).getAnnonce(e.match.params.uid),a.state={annonce:""},a}return Object(p.a)(n,[{key:"getAnnonce",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://etud-event-api.herokuapp.com/annonce/".concat(t),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,this.setState({annonce:a.annonce[0]});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Annonce: ",this.props.match.params.uid),r.a.createElement("p",null,this.state.annonce.data))}}]),n}(a.Component));Object(c.render)(r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(i.a,{exact:!0,path:"/",component:N}),r.a.createElement(i.a,{exact:!0,path:"/login",component:k}),r.a.createElement(i.a,{exact:!0,path:"/register",component:j}),r.a.createElement(i.a,{exact:!0,path:"/annonce/:uid",component:x}))),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.85c2aca8.chunk.js.map