{"version":3,"sources":["components/Auth.js","screens/auth/login.js","screens/auth/register.js","screens/annonce/index.js","screens/annonce/annonce.js","index.js"],"names":["Auth","this","getProfile","bind","token","getToken","isTokenExpired","decode","exp","Date","now","err","localStorage","setItem","getItem","removeItem","withAuth","AuthComponent","auth","state","user","loggedIn","setState","logout","props","history","replace","Component","Login","password","email","submit","alert","fetch","method","headers","body","JSON","stringify","request","json","response","result","setToken","className","htmlFor","type","id","onChange","target","value","trim","toLowerCase","onClick","Register","name","Annonce","date","data","console","log","push","uid","style","backgroundImage","image","title","getDay","getDate","getMonth","getFullYear","annonces","getAnnonce","show","page","concat","annonce","map","index","key","match","params","render","exact","path","component","AnnonceMain","document","getElementById"],"mappings":"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","file":"static/js/main.85c2aca8.chunk.js","sourcesContent":["import decode from 'jwt-decode'\nimport React, { Component } from 'react'\n\nclass Auth {\n\n  constructor() {\n    this.getProfile = this.getProfile.bind(this)\n  }\n\n  loggedIn() {\n    const token = this.getToken() \n    return !!token && !this.isTokenExpired(token)\n  }\n\n  isTokenExpired(token) {\n    try {\n      const decoded = decode(token);\n      return (decoded.exp < Date.now() / 1000) \n    }catch (err) {\n      return false;\n    }\n  }\n\n  setToken(token) {\n    localStorage.setItem('id_token', token)\n  }\n\n  getToken() {\n    return localStorage.getItem('id_token')\n  }\n\n  logout() {\n    localStorage.removeItem('id_token')\n  }\n\n  getProfile() {\n    return decode(this.getToken())\n  }\n\n\n}\n\nexport default new Auth()\n\n\nexport function withAuth(AuthComponent) {\n  const auth = new Auth();\n  return class AuthWrapped extends Component {\n    constructor() {\n      super()\n      this.state = {\n        user: null\n      }\n    }\n\n    componentWillMount() {\n      if (!auth.loggedIn()) {\n        this.props.history.replace('/login')\n      }else {\n        try {\n          const user = auth.getProfile()\n          this.setState({user})\n        }catch(err){\n          auth.logout()\n          this.props.history.replace('/login')\n        }\n      }\n    }\n\n    render() {\n      if(this.state.user) {\n        return (\n          <AuthComponent {...this.props} user={this.state.user} />\n        )\n      }else return null\n    }\n\n  }\n}","import React, { Component } from 'react';\r\nimport './style.css';\r\n\r\nimport Auth from '../../components/Auth'\r\n\r\nclass Login extends Component {\r\n  constructor(){\r\n\t\tsuper()\r\n    this.state = {\r\n\t\t\tpassword: \"\",\r\n\t\t\temail: \"\"\r\n\t\t}\r\n\t\tthis.submit = this.submit.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    if(Auth.loggedIn()) this.props.history.replace(\"/\")\r\n  }\r\n\r\n\tasync submit() {\r\n\t\tlet {password, email} = this.state\r\n\r\n\t\tif(password === \"\" || email === \"\") {\r\n\t\t\talert(\"il faut tout mettre un truc\")\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst request = await fetch(\"https://etud-event-api.herokuapp.com/account/connect\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({email, password})\r\n    })\r\n\t\tconst response = await request.json()\r\n\t\tif(response.result !== \"OK\") {\r\n\t\t\talert(\"il y a une erreur\")\r\n\t\t}else {\r\n      Auth.setToken(response.token)\r\n      this.props.history.replace(\"/\")\r\n\t\t}\r\n\r\n\t}\r\n\r\n  render() {\r\n    return (\r\n\t\t\t<div className=\"container login\">\r\n\t\t\t\t<div className=\"form\">\r\n\t\t\t\t\t<h1 className=\"text2\">S'authentifier</h1>\r\n\t\t\t\t\r\n\t\t\t\t\t<label htmlFor=\"email\" className=\"text\">E-MAIL</label>\r\n\t\t\t\t\t<input type=\"text\" id=\"email\" onChange={email => this.setState({email: email.target.value.trim().toLowerCase()})}/>\r\n\r\n\t\t\t\t\t<label htmlFor=\"password\" className=\"text\">MOT DE PASSE</label>\r\n\t\t\t\t\t<input type=\"password\" id=\"password\" onChange={password => this.setState({password: password.target.value})}/>\r\n\r\n\t\t\t\t\t<div className=\"passwordforget\">\r\n\t\t\t\t\t\t<p>Mot de passe oublié ?</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t<div className=\"boutonContainer\">\r\n\t\t\t\t\t\t<button className=\"connexion\" onClick={this.submit}>Connexion</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"signup\" onClick={() => this.props.history.replace(\"/register\")}>\r\n\t\t\t\t\t\t<p>Inscription</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Login;","import React, { Component } from 'react';\nimport './style.css';\n\nexport default class Register extends Component {\n\n  render() {\n  \treturn(\n    \t<div className=\"container register\">\n\t\t\t\t<div className=\"form\">\n\t\t\t\t\t<h1 className=\"text2\">S'inscrire</h1>\n\n\t\t\t\t\t<label htmlFor=\"email\" className=\"text\">E-MAIL</label>\n\t\t\t\t\t<input type=\"text\" name=\"email\" id=\"email\"/>\n\n\t\t\t\t\t<label htmlFor=\"password\" className=\"text\">MOT DE PASSE</label>\n\t\t\t\t\t<input type=\"password\" name=\"password\" id=\"password\"/>\n\n\t\t\t\t\t<label htmlFor=\"cpassword\" className=\"text\">CONFIRMER LE MOT DE PASSE</label>\n\t\t\t\t\t<input type=\"password\" name=\"password\" id=\"cpassword\"/>\n\t\t\t\t\t\t\n\t\t\t\t\t<label htmlFor=\"select\" className=\"text\">DÉPARTEMENT</label>\n\t\t\t\t\t<select id=\"select\" name=\"dep\">\n\t\t\t\t\t\t<option value=\"R&amp;T\">Réseaux et télécommunications</option>\n\t\t\t\t\t\t<option value=\"GB\">Génie biologique</option>\n\t\t\t\t\t\t<option value=\"GCGP\">Génie chimique - Génie des procédés</option>\n\t\t\t\t\t\t<option value=\"GCCD\">Génie civil - Construction durable</option>\n\t\t\t\t\t\t<option value=\"GEII\">Génie électrique et inhtmlFormatique industrielle</option>\n\t\t\t\t\t\t<option value=\"GMP\">Génie mécanique et productique</option>\n\t\t\t\t\t\t<option value=\"QLIO\">Qualité, logistique industrielle et organisation</option>\n\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\n\t\t\t\t\t<div className=\"passwordforget\"><p>Mot de passe oublié ?</p></div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t<div className=\"boutonContainer\">\n\t\t\t\t\t\t<button className=\"connexion\">Connexion</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"signup\" onClick={() => this.props.history.replace(\"/login\")}><p>Connexion</p></div>\n\t\t\t\t</div>\n\t\t\t</div>\n    )\n  }\n}\n","import React, { Component } from 'react';\nimport './style.css';\n\nimport Auth,{withAuth} from '../../components/Auth'\n\nfunction Annonce(props) {\n  const days = [\"Lundi\",\"Mardi\",\"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\", \"Dimanche\"]\n  const month = [\"Janvier\", \"Février\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Août\", \"Septembre\", \"Octobre\", \"Novembre\", \"Décembre\"]\n  const date = new Date(props.data.date)\n  console.log(props)\n  return (\n    <div\n      onClick={() => props.history.push(\"/annonce/\"+props.data.uid)}\n      className=\"annonce\"\n      style={{backgroundImage: `url(http://etudevent-api.herokuapp.com/cdn/annonce/${props.data.image || \"3.jpg\"})`}}\n    >\n      <h1>{props.data.title}</h1>\n      <p>{days[date.getDay()-1]} {date.getDate()} {month[date.getMonth()]} {date.getFullYear()}</p>\n    </div>\n  )\n}\n\nclass AnnonceMain extends Component {\n  constructor(){\n\t  super()\n    this.logout = this.logout.bind(this)\n    this.state = {\n      annonces: []\n    }\n  }\n\n  componentDidMount() {\n    this.getAnnonce()\n  }\n\n  logout() {\n    Auth.logout()\n    this.props.history.replace(\"/login\")\n  }\n\n  async getAnnonce(show=10, page=0) {\n    const request = await fetch(`https://etud-event-api.herokuapp.com/annonce?show=${show}&page=${page}`, {\n      method: \"GET\",\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n    const response = await request.json()\n    console.log(response)\n    this.setState({annonces: this.state.annonces.concat(response.annonce)})\n  }\n\n  render() {\n    return (\n      <div>\n        \n        <nav>\n          <div className=\"nohover\">\n            <div className=\"image\"></div>\n          </div>\n          <div className=\"active\">Annonces</div>\n          <div>Forum</div>\n          <div>Liens utiles</div>\n          <div>Contact</div>\n\n          <div className=\"right nohover\">\n            <div className=\"post\" onClick={this.logout}>Poster une annonce</div>\n            <div>\n              <div className=\"image\"></div>\n            </div>\n          </div>\n\n        </nav>\n        <nav>\n          <div className=\"active\">Annonces officielles</div>\n          <div>Annonces &eacute;tudiantes</div>\n          <div>Favoris</div>\n        </nav>\n\n\n        <div className=\"acontainer\">\n          <div className=\"main\">\n            {this.state.annonces.map((annonce, index) => <Annonce key={index} data={annonce} history={this.props.history}/>)}\n          </div>\n          <div className=\"selector\"></div>\n        </div>\n      </div>\n    )\n  }\n}\n\n\nexport default withAuth(AnnonceMain)","import React, { Component } from 'react';\n\nimport Auth,{withAuth} from '../../components/Auth'\n\n\nclass Annonce extends Component {\n  constructor(props) {\n    super()\n    this.getAnnonce(props.match.params.uid)\n    this.state = {\n      annonce: \"\"\n    }\n  }\n  async getAnnonce(uid) {\n    const request = await fetch(`https://etud-event-api.herokuapp.com/annonce/${uid}`, {\n      method: \"GET\",\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n    const response = await request.json()\n    this.setState({annonce: response.annonce[0]})\n  }\n\n  render() {\n  \treturn(\n      <div>\n        <h1>Annonce: {this.props.match.params.uid}</h1>\n        <p>{this.state.annonce.data}</p>\n      </div>\n    )\n  }\n}\nexport default withAuth(Annonce)","import React from 'react';\nimport {render} from 'react-dom';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\n\nimport \"./index.css\"\n\nimport Login from './screens/auth/login';\nimport Register from './screens/auth/register';\nimport AnnonceMain from \"./screens/annonce/\"\nimport Annonce from \"./screens/annonce/annonce\"\n\nrender(\n  <Router>\n    <div>\n      <Route exact path=\"/\" component={AnnonceMain} />\n      <Route exact path=\"/login\" component={Login} />\n      <Route exact path=\"/register\" component={Register} />\n      <Route exact path=\"/annonce/:uid\" component={Annonce} />\n    </div>\n  </Router>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}